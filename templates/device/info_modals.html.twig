<!-- ===== INFO MODALS ===== -->
{% for device in devices %}
    <div class="modal modal-device shadow-1 white falling w-100" id="modal_info_{{device.id}}" data-ax="modal" aria-hidden="true" tabindex="-1">
        <div class="modal-dialog modal-dialogue-device w-100 h-100">
            <div class="modal-content w-100 h-100">
                <div class="modal-header">
                <h5 class="text-center w-100 align-middle">{{ 'Device Info'|trans }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="divider"></div>
                <div class="px-4 pb-5 pt-1 w-100 h-100 d-flex flex-column justify-content-between align-items-stretch">
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Serial Number'|trans }} :</b>
                            <div>{{device.sn}}</div>
                        </div>
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Device Type'|trans }} :</b>
                            <div>{{device.deviceFamily}}</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Version'|trans }} :</b>
                            <div>{{device.version}}</div>
                        </div>
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'IP Address'|trans }} :</b>
                            <div>{{device.ipAddr}}</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Country'|trans }} :</b>
                            <div>{{device.country}}</div>
                        </div>
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'City'|trans }} :</b>
                            <div>{{device.city}}</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Advertising'|trans }} :</b>
                            <div class="{{(device.pub)? 'device-active': 'device-inactive'}}">
                            {{ (device.pub)? 'Yes': 'No'}}
                            </div>
                        </div>
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'PIN code'|trans }} :</b>
                            <div>{{device.codePin}}</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Creation Date'|trans }} :</b>
                            <div>{{device.createdAt|format_datetime('medium', 'short')}}</div>
                        </div>
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Update Date'|trans }} :</b>
                            <div>{{device.updatedAt|format_datetime('medium', 'short')}}</div>
                        </div>
                    </div>
                    <hr class="hr" />
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Status'|trans }} :</b>
                            <div class="{{(device.isActive)? 'device-active': 'device-inactive'}}">{{(device.isActive)? 'Active':'Inactive'}}</div>
                        </div>
                        {% if is_granted("ROLE_SUPER_ADMIN") %}
                        <div class="d-flex flex-column justify-content-left w-50 align-self-stretch">
                            <b>{{ 'Connect'|trans }} :</b>
                            {% if (device.deviceFamily == "BIOBACK" or device.deviceFamily == "RSHOCK" or device.deviceFamily == "CRYOBACK4") %}
                                <input class="btn bg-green btn-outline-green connect_button w-75" 
                                id="c_sn_{{device.sn}}" 
                                data-id="connect_{{device.id}}" 
                                name='{{device.sn}}' type="button" value="Connect" 
                                data-bs-toggle="modal" data-bs-target="#testAcces_{{device.id}}">
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                    <hr class="hr" />

                    {% if is_granted("ROLE_GOE")%}
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div class="d-flex flex-column justify-content-left">
                            <b>{{ 'Upload Version'|trans }} :</b>
                            <div>
                                <input type="text"
                                    data-id="{{device.id}}" 
                                    name="" value="" 
                                    id="update_{{device.id}}"
                                    class="update-zone" style='width:12em;'>
                            </div>
                        </div>
                        <div class="d-flex flex-nowrap justify-content-left align-self-stretch align-items-center">
                            <b class="me-1">{{ 'Forced'|trans }} :</b>
                            <div>
                                <input type="checkbox" 
                                id="forced_{{device.id}}"
                                {{ (device.forced)? 'checked': ''}} 
                                data-id="{{device.id}}" 
                                name="switchbox">
                            </div>
                        </div>

                    </div>
                    {% if is_granted("ROLE_GOE")%}
                    <div class="text-end w-100">
                        <button type="button"
                        class="update btn btn-dark red shadow-1 rounded-1 small valid-buttons"  
                        name="{{device.id}}">{{ 'Validate'|trans }}
                        </button>
                    </div>
                    {% endif %}
                    <hr class="hr" />
                        {% if is_granted("ROLE_ADMIN")%}
                        <div class="d-flex justify-content-between w-100">
                            <div class="d-flex flex-column justify-content-left">
                                <b>{{ 'Server IP'|trans }}</b>
                                <input type="text"
                                data-id="{{device.id}}" 
                                name="" value="{{device.serverIp}}" 
                                id="server_ip_{{device.id}}"
                                class="server_ip-zone" style='width:12em;'>
                            </div>
                            <div class="d-flex flex-column justify-content-left">
                                <b>{{ 'Server Port'|trans }}</b>
                                <input type="text"
                                data-id="{{device.id}}" 
                                name="" value="{{device.serverPort}}" 
                                id="server_port_{{device.id}}"
                                class="server_port-zone" style='width:12em;'>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between w-100">
                            <div class="d-flex justify-content-left flex-nowrap align-items-center align-self-stretch">
                                <b class="me-1">{{ 'Server ID'|trans }}</b>
                                <input type="checkbox" 
                                id="server_id_{{device.id}}"
                                {{ (device.serverId)? 'checked': ''}} 
                                data-id="{{device.id}}" 
                                name="switchbox">
                            </div>
                            <button type="button"
                            class="update btn btn-dark red shadow-1 rounded-1 small server-buttons"  
                            name="{{device.id}}">{{ 'Validate'|trans }}
                            </button>
                        </div>
                        {% elseif is_granted("ROLE_GOE")%}
                        <div class="d-flex justify-content-between align-items-center w-100">
                            <div>
                                <b>{{ 'Server IP'|trans }}</b>
                                <div>
                                {{device.serverIp}}
                                </div>
                            </div>
                            <div>
                                <b>{{ 'Server Port'|trans }}</b>
                                <div>
                                {{device.serverPort}}
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    
                    {% endif %}
                    
                </div>
            </div>
        </div>
    </div>

    {% include 'device/acces_modals.html.twig' %}
{% endfor %}